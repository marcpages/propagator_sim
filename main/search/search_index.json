{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"PROPAGATOR Sim <p>     An operational cellular-automata wildfire simulator developed by     CIMA Research Foundation.     PROPAGATOR couples a Numba-powered propagation core with reusable I/O pipelines     and a configurable CLI for fire forecasting.   </p> Get started Programmatic workflow API reference Bibliography"},{"location":"#whats-included","title":"What's Included","text":"<ul> <li>Simulation engine: the <code>propagator.core</code> package evolves ignition grids, applies stochastic spread models, and handles boundary conditions.</li> <li>Data access: helpers under <code>propagator.io</code> prepare GeoTIFFs or tiled rasters and emit GeoTIFF, GeoJSON, and JSON outputs.</li> <li>Command line tools: the <code>propagator</code> CLI orchestrates runs, handles configuration files, and writes time-stepped products to disk.</li> <li>Documentation + API reference: MkDocs pages provide operator guides, while mkdocstrings renders the public Python API.</li> </ul>"},{"location":"#typical-workflow","title":"Typical Workflow","text":"<ol> <li>Prepare a JSON configuration describing ignition geometry, simulation horizon, and model toggles (see <code>example/config*.json</code>).</li> <li>Supply static data\u2014either as GeoTIFF DEM/vegetation layers or a tileset directory\u2014and optional YAML fuel definitions.</li> <li>Launch the run via the CLI (<code>uv run propagator \u2026</code>), enabling verbose or recording modes for richer logging.</li> <li>Inspect the generated rasters, isochrones, and metadata in the configured output directory.</li> </ol>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting started: prerequisites, install, first simulation, and programmatic API tips</li> <li>Programmatic Workflow: end-to-end scripting with loaders and writers</li> <li>CLI: command options, modes, and logging</li> <li>API: Python package and Numba backend reference</li> </ul>"},{"location":"bibliography/","title":"Bibliography","text":"<p>Key references describing PROPAGATOR\u2019s scientific background, operational use, and applications to prescribed fire planning.</p>"},{"location":"bibliography/#core-simulator","title":"Core Simulator","text":"<ul> <li>A. Trucchia, M. D\u2019Andrea, F. Baghino, P. Fiorucci, L. Ferraris, D. Negro, A.   Gollini, and M. Severino. \u201cPropagator: An operational cellular-automata based   wildfire simulator.\u201d Fire 3(3):26, 2020.   doi:10.3390/fire3030026</li> </ul>"},{"location":"bibliography/#operational-deployments","title":"Operational Deployments","text":"<ul> <li>A. Trucchia, M. D\u2019Andrea, F. Baghino, N. Perello, N. Rebora, and P. Fiorucci.   \u201cExperiences and lessons learnt in wildfire management with PROPAGATOR, an   operational cellular-automata-based wildfire simulator.\u201d In D. Sempere-Torres,   A. Karakostas, C. Rossi, and P. Quevauviller (eds.), Responding to Extreme   Weather Events, chapter 3. Wiley, 2024.   doi:10.1002/9781119741374.ch3</li> </ul>"},{"location":"bibliography/#prescribed-fire-planning","title":"Prescribed Fire Planning","text":"<ul> <li>N. Perello, A. Trucchia, F. Baghino, B. S. Asif, L. Palmieri, N. Rebora, and   P. Fiorucci. \u201cCellular automata-based simulators for the design of prescribed   fire plans: the case study of Liguria, Italy.\u201d Fire Ecology 20(7), 2024.   doi:10.1186/s42408-023-00239-7</li> </ul>"},{"location":"cli/","title":"CLI Usage","text":"<p>The <code>propagator</code> command drives simulations from the terminal. It validates input files, prepares rasters, runs the propagation loop, and writes outputs on every reporting interval.</p> <pre><code>uv run propagator --help\n</code></pre>"},{"location":"cli/#basic-invocation","title":"Basic Invocation","text":"<pre><code>uv run propagator \\\n  --config example/config.json \\\n  --mode geotiff \\\n  --dem example/dem.tif \\\n  --fuel example/fuel.tif \\\n  --output results/run-2025-02-19\n</code></pre> <p>CLI arguments are powered by <code>pydantic-settings</code>; required inputs raise clear validation errors before the simulation starts.</p>"},{"location":"cli/#operating-modes","title":"Operating Modes","text":"<ul> <li>GeoTIFF mode (<code>--mode geotiff</code>): supply explicit DEM (<code>--dem</code>) and fuel   (<code>--fuel</code>) GeoTIFF rasters. Use this for bespoke datasets or the bundled   quickstart sample.</li> <li>Tiles mode (<code>--mode tiles</code>, default): point to a directory of tiled DEM   and vegetation rasters with <code>--tilespath</code> and choose a tileset via   <code>--tileset</code>. The simulator infers the geographic window from ignition   coordinates defined in the configuration.</li> </ul> <p>Switching between modes controls which arguments are required; passing both <code>--dem</code> and <code>--fuel</code> automatically activates GeoTIFF mode even if <code>--mode</code> is left at the default.</p>"},{"location":"cli/#argument-reference","title":"Argument Reference","text":"Flag Type / Default Description <code>--config PATH</code> required JSON configuration file parsed into <code>PropagatorConfigurationLegacy</code>. <code>--fuel-config PATH</code> optional YAML file defining a custom fuel system (<code>fuels</code> mapping). <code>--mode {tiles,geotiff}</code> <code>tiles</code> Select how static rasters are loaded (see above). <code>--dem PATH</code> required in geotiff mode DEM GeoTIFF when running in geotiff mode. <code>--fuel PATH</code> required in geotiff mode Fuel/vegetation GeoTIFF when running in geotiff mode. <code>--tilespath PATH</code> required in tiles mode Base directory containing tiled rasters. <code>--tileset NAME</code> optional Tileset to use within <code>tilespath</code> (defaults to <code>default</code>). <code>--output PATH</code> required Destination directory; created if missing. Stores GeoTIFF, GeoJSON, and JSON outputs. <code>--isochrones FLOAT \u2026</code> <code>0.5 0.75 0.9</code> Probability thresholds for GeoJSON isochrone export. Repeat the flag to set multiple values. <code>--record</code> flag, default off When enabled, saves a Rich console log in the output directory. <code>--ignore-out-of-bounds</code> flag, default off Continue the simulation when the fire reaches the DEM boundary. <code>--verbose</code> flag, default off Print status tables, boundary conditions, and timing information. <p>Boolean switches use implicit flags: including <code>--verbose</code>, <code>--record</code>, or <code>--ignore-out-of-bounds</code> turns each behaviour on.</p>"},{"location":"cli/#output-products","title":"Output Products","text":"<p>During the run, the CLI periodically writes: - GeoTIFF rasters for fire probability, fireline intensity (mean/max), and rate   of spread (mean/max). - GeoJSON isochrones for configured probability thresholds. - Metadata JSON capturing CLI arguments, execution time, and summary statistics.</p> <p>Set <code>--record</code> to capture the Rich console log alongside these artefacts, which is useful for post-run audits.</p>"},{"location":"cli/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Missing GeoTIFFs or tiles raise validation errors before the simulation   boots; check path spelling if you hit them.</li> <li>If dependency wheels complain about PROJ/GDAL, ensure the native libraries   are installed (see Getting Started).</li> <li>For reproducible runs across multiple ignitions or meteorological scenarios,   adjust <code>realizations</code>, <code>time_limit</code>, and <code>boundary_conditions</code> inside the   JSON configuration file.</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Follow these steps to install PROPAGATOR, launch your first simulation, and inspect the generated outputs.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11 or newer</li> <li>uv 0.4+ (recommended) or another virtualenv   manager</li> <li>PROJ/GDAL libraries available on your system (needed by <code>rasterio</code>,   <code>fiona</code>, and other I/O extras used by the CLI)</li> </ul> <p>Clone the repository and switch into the project root before running the commands below.</p>"},{"location":"getting-started/#install-dependencies","title":"Install Dependencies","text":"<p>Using uv (installs the core library, CLI, I/O extras, and development tooling):</p> <pre><code>uv sync --dev --all-extras\n</code></pre> <p>Using pip (creates a virtual environment and installs the package in editable mode with CLI + I/O extras):</p> <pre><code>python -m venv .venv\nsource .venv/bin/activate\npip install -e '.[cli,io]'\n</code></pre> <p>If you only need the simulation engine (without CLI/I/O helpers) drop the extras from the install command.</p>"},{"location":"getting-started/#first-simulation","title":"First Simulation","text":"<p>The repository ships with small GeoTIFF datasets and configuration files under <code>example/</code>. Run a simulation in GeoTIFF mode with:</p> <pre><code>uv run propagator \\\n  --config example/config.json \\\n  --mode geotiff \\\n  --dem example/dem.tif \\\n  --fuel example/fuel.tif \\\n  --output results/quickstart\n</code></pre> <p>The command will create the <code>results/quickstart</code> directory if it does not already exist. Time-related settings in the configuration file (for example <code>time_limit</code> and <code>time_resolution</code>) are expressed in seconds.</p>"},{"location":"getting-started/#optional-inputs","title":"Optional inputs","text":"<ul> <li>Provide a custom fuel model with <code>--fuel-config example/fuel_config.yaml</code>.</li> <li>Switch to tiles mode by supplying <code>--mode tiles --tilespath &lt;tiles_dir&gt;   [--tileset &lt;name&gt;]</code> when using staged tiled rasters instead of GeoTIFFs.</li> <li>Add <code>--verbose</code> to print progress tables and boundary-condition details.</li> <li>Add <code>--record</code> to save terminal logs alongside the simulation outputs.</li> </ul>"},{"location":"getting-started/#inspect-the-outputs","title":"Inspect the Outputs","text":"<p>After the run completes, the output directory contains GeoTIFF rasters (<code>fire_probability</code>, <code>fireline_intensity_*</code>, <code>ros_*</code>), GeoJSON isochrones, and metadata JSON summarising the run. Visualise the rasters with any GIS tool or load them back into Python using <code>rasterio</code> or <code>geopandas</code>.</p>"},{"location":"getting-started/#programmatic-usage","title":"Programmatic Usage","text":"<p>You can embed PROPAGATOR directly in your Python workflows when you need custom post-processing or bespoke integration logic. The snippet below mirrors <code>example/example.py</code> and shows the essential steps:</p> <pre><code>import numpy as np\nfrom propagator.core import BoundaryConditions, FUEL_SYSTEM_LEGACY, Propagator\n\ndem = np.zeros((2000, 2000), dtype=np.float32)\nveg = np.full(dem.shape, 5, dtype=np.int32)\n\nsim = Propagator(\n    dem=dem,\n    veg=veg,\n    realizations=10,\n    fuels=FUEL_SYSTEM_LEGACY,\n    do_spotting=False,\n    out_of_bounds_mode=\"raise\",\n)\n\nignitions = [(dem.shape[0] // 2, dem.shape[1] // 2)]\n\nsim.set_boundary_conditions(\n    BoundaryConditions(\n        time=0,\n        ignitions=ignitions,\n        wind_speed=np.ones_like(dem) * 40,\n        wind_dir=np.ones_like(dem) * 90,\n        moisture=np.zeros_like(dem),\n    )\n)\n\nwhile (next_time := sim.next_time()) is not None and sim.time &lt;= 3600:\n    sim.step()\n    if sim.time % 600 == 0:\n        fire_prob = sim.compute_fire_probability()\n        # use fire_prob in your analytics stack (save to disk, visualise, etc.)\n</code></pre> <p>Key points: - Provide DEM/fuel rasters as NumPy arrays; no disk I/O is required unless you   need it. - <code>ignitions</code> accepts boolean rasters or <code>(row, col[, realization])</code> tuples. - Boundary conditions can be updated over time\u2014compute time-dependent wind or   moisture fields before calling <code>set_boundary_conditions</code>. - The main loop alternates between <code>next_time()</code> to schedule time steps and   <code>step()</code> to advance the simulation. At chosen intervals, derive statistics   with methods like <code>compute_fire_probability()</code> or retrieve the full   <code>PropagatorOutput</code> via <code>get_output()</code>.</p> <p>For a complete runnable notebook-style walkthrough (including Matplotlib plots), open <code>example/example.py</code>. For a production-style pipeline that loads rasters and writes outputs via <code>propagator.io</code>, see the Programmatic Workflow guide.</p>"},{"location":"getting-started/#validate-the-environment","title":"Validate the Environment","text":"<p>To confirm your setup, run the automated tests and a docs build:</p> <pre><code>uv run pytest -q\nuv run ruff check src tests\nuv run mkdocs build\n</code></pre> <p>All commands should finish without errors: if GDAL-related wheels fail to install, verify that your system libraries are available to <code>pip</code>/<code>uv</code>.</p>"},{"location":"programmatic/","title":"Programmatic Workflow","text":"<p>This guide walks through a richer example that mirrors the CLI pipeline but is implemented entirely in Python. It combines pieces from <code>propagator.core</code> and <code>propagator.io</code> to load rasters, configure simulations, and write artefacts on each reporting interval.</p>"},{"location":"programmatic/#scenario-overview","title":"Scenario Overview","text":"<p>We will:</p> <ol> <li>Parse a JSON configuration for ignition geometry and model options.</li> <li>Load DEM and fuel rasters from GeoTIFF files using the high-level loader.</li> <li>Instantiate the simulator with a custom fuel system.</li> <li>Generate raster, GeoJSON, and metadata outputs with the writer utilities.</li> </ol> <p>The example uses the datasets under <code>example/</code> so you can run it without additional downloads.</p>"},{"location":"programmatic/#complete-script","title":"Complete Script","text":"<pre><code>from pathlib import Path\n\nfrom pyproj import CRS\n\nfrom propagator.core import FUEL_SYSTEM_LEGACY, Propagator\nfrom propagator.io.configuration import PropagatorConfigurationLegacy\nfrom propagator.io.loader.geotiff import PropagatorDataFromGeotiffs\nfrom propagator.io.writer import (\n    GeoTiffWriter,\n    IsochronesGeoJSONWriter,\n    MetadataJSONWriter,\n    OutputWriter,\n)\n\nROOT = Path(__file__).resolve().parent\nconfig_path = ROOT / \"config.json\"\ndem_path = ROOT / \"dem.tif\"\nfuel_path = ROOT / \"fuel.tif\"\noutput_dir = ROOT / \"output-programmatic\"\n\ncfg = PropagatorConfigurationLegacy.model_validate_json(config_path.read_text())\n\nloader = PropagatorDataFromGeotiffs(\n    dem_file=str(dem_path),\n    veg_file=str(fuel_path),\n)\ndem = loader.get_dem()\nveg = loader.get_veg()\ngeo_info = loader.get_geo_info()\n\nsim = Propagator(\n    dem=dem,\n    veg=veg,\n    realizations=cfg.realizations,\n    fuels=FUEL_SYSTEM_LEGACY,\n    do_spotting=cfg.do_spotting,\n    out_of_bounds_mode=\"ignore\",\n    p_time_fn=cfg.p_time_fn,\n    p_moist_fn=cfg.p_moist_fn,\n)\n\nwriters = OutputWriter(\n    raster_writer=GeoTiffWriter(\n        start_date=cfg.init_date,\n        output_folder=output_dir,\n        geo_info=geo_info,\n        dst_crs=CRS.from_epsg(4326),\n        raster_variables_mapping={\n            \"fire_probability\": lambda out: out.fire_probability,\n            \"ros_mean\": lambda out: out.ros_mean,\n            \"ros_max\": lambda out: out.ros_max,\n        },\n    ),\n    metadata_writer=MetadataJSONWriter(\n        start_date=cfg.init_date,\n        output_folder=output_dir,\n        prefix=\"metadata\",\n    ),\n    isochrones_writer=IsochronesGeoJSONWriter(\n        start_date=cfg.init_date,\n        output_folder=output_dir,\n        prefix=\"isochrones\",\n        thresholds=[0.3, 0.6, 0.9],\n        geo_info=geo_info,\n        dst_crs=CRS.from_epsg(4326),\n    ),\n)\n\nnon_vegetated = sim.fuels.get_non_vegetated()\nfor bc in cfg.get_boundary_conditions(geo_info, non_vegetated):\n    sim.set_boundary_conditions(bc)\n\nwhile True:\n    next_time = sim.next_time()\n    if next_time is None or next_time &gt; cfg.time_limit:\n        break\n\n    sim.step()\n    if sim.time % cfg.time_resolution == 0:\n        output = sim.get_output()\n        writers.write_output(output)\n\nfinal_output = sim.get_output()\nprint(f\"Final simulated time: {final_output.time} seconds\")\n</code></pre>"},{"location":"programmatic/#key-elements","title":"Key Elements","text":"<ul> <li>Configuration parsing: <code>PropagatorConfigurationLegacy.model_validate_json</code>   applies the same schema enforced by the CLI, ensuring you reuse existing   validation.</li> <li>Raster loading: <code>PropagatorDataFromGeotiffs</code> handles <code>rasterio</code> opening and   returns NumPy arrays along with spatial metadata in <code>geo_info</code>.</li> <li>Output orchestration: <code>OutputWriter</code> coordinates the specialized writers.   You can add or remove raster variables by editing the <code>raster_variables_mapping</code>   dictionary.</li> <li>Simulation loop: keep calling <code>next_time()</code> until it returns <code>None</code> or you   exceed <code>time_limit</code>, then advance with <code>step()</code>. Every reporting interval,   <code>get_output()</code> captures derived stats and raw fields ready for persistence.</li> </ul>"},{"location":"programmatic/#going-further","title":"Going Further","text":"<ul> <li>Swap <code>PropagatorDataFromGeotiffs</code> for <code>PropagatorDataFromTiles</code> when working   with tiled rasters and dynamic midpoints.</li> <li>Load a custom fuel system using <code>fuels_from_yaml</code> or programmatically (see <code>cli.main</code>) if the   legacy fuel system does not match your fuel types.</li> <li>Instead of the bundled writers, feed <code>PropagatorOutput</code> into your own   analytics pipeline\u2014store arrays in cloud buckets, stream summaries to a   dashboard, or trigger scheduling logic for subsequent model runs.</li> </ul>"},{"location":"reference/","title":"API Reference","text":"<p>Auto-generated documentation for the public Python APIs. Each section links to mkdocstrings pages generated from the implementations under <code>src/</code>.</p> <ul> <li>propagator core: high-level simulation interfaces and   scheduler utilities.</li> <li>propagator io: data loaders, writers, and shared I/O protocols.</li> <li>numba backend: fast kernels and helper utilities powering the   simulation engine.</li> </ul> <p>Use the sidebar or the links above to explore additional submodules.</p>"},{"location":"reference/io/","title":"propagator.io","text":"<p>The <code>propagator.io</code> package wraps raster loading routines and writer utilities used by both the CLI and programmatic workflows. The sections below surface the public classes and protocols that are exported via <code>propagator.io.__all__</code>.</p>"},{"location":"reference/io/#public-shortcuts","title":"Public Shortcuts","text":""},{"location":"reference/io/#propagator.io","title":"<code>propagator.io</code>","text":""},{"location":"reference/io/#propagator.io.PropagatorDataFromTiles","title":"<code>PropagatorDataFromTiles(base_path, mid_lat, mid_lon, grid_dim, tileset=DEFAULT_TILES_TAG)</code>  <code>dataclass</code>","text":"<p>               Bases: <code>PropagatorInputDataProtocol</code></p>"},{"location":"reference/io/#propagator.io.PropagatorDataFromTiles.load_tile","title":"<code>load_tile(zone_number, var, tile_i, tile_j, tileset=DEFAULT_TILES_TAG)</code>","text":"<p>Load a tile from the data directory, either as a .mat or .tif file. :param zone_number: UTM zone number :param var: Variable name (e.g., \"quo\" or \"prop\") :param tile_i: Tile index in the i direction :param tile_j: Tile index in the j direction :param tileset: Tileset name (default is \"tiles\")</p>"},{"location":"reference/io/#propagator.io.PropagatorDataFromTiles.load_tile_ref","title":"<code>load_tile_ref(zone_number, var, tileset=DEFAULT_TILES_TAG)</code>","text":"<p>Load the reference file for the zone, which contains metadata such as step size and tile dimensions. :param zone_number: UTM zone number :param var: Variable name (e.g., \"quo\" or \"prop\") :param tileset: Tileset name</p>"},{"location":"reference/io/#loaders","title":"Loaders","text":""},{"location":"reference/io/#propagator.io.loader.protocol","title":"<code>propagator.io.loader.protocol</code>","text":""},{"location":"reference/io/#propagator.io.loader.geotiff","title":"<code>propagator.io.loader.geotiff</code>","text":""},{"location":"reference/io/#propagator.io.loader.tiles","title":"<code>propagator.io.loader.tiles</code>","text":""},{"location":"reference/io/#propagator.io.loader.tiles.PropagatorDataFromTiles","title":"<code>PropagatorDataFromTiles(base_path, mid_lat, mid_lon, grid_dim, tileset=DEFAULT_TILES_TAG)</code>  <code>dataclass</code>","text":"<p>               Bases: <code>PropagatorInputDataProtocol</code></p>"},{"location":"reference/io/#propagator.io.loader.tiles.PropagatorDataFromTiles.load_tile","title":"<code>load_tile(zone_number, var, tile_i, tile_j, tileset=DEFAULT_TILES_TAG)</code>","text":"<p>Load a tile from the data directory, either as a .mat or .tif file. :param zone_number: UTM zone number :param var: Variable name (e.g., \"quo\" or \"prop\") :param tile_i: Tile index in the i direction :param tile_j: Tile index in the j direction :param tileset: Tileset name (default is \"tiles\")</p>"},{"location":"reference/io/#propagator.io.loader.tiles.PropagatorDataFromTiles.load_tile_ref","title":"<code>load_tile_ref(zone_number, var, tileset=DEFAULT_TILES_TAG)</code>","text":"<p>Load the reference file for the zone, which contains metadata such as step size and tile dimensions. :param zone_number: UTM zone number :param var: Variable name (e.g., \"quo\" or \"prop\") :param tileset: Tileset name</p>"},{"location":"reference/io/#writers","title":"Writers","text":""},{"location":"reference/io/#propagator.io.writer.protocol","title":"<code>propagator.io.writer.protocol</code>","text":""},{"location":"reference/io/#propagator.io.writer.raster_geotiff","title":"<code>propagator.io.writer.raster_geotiff</code>","text":""},{"location":"reference/io/#propagator.io.writer.raster_geotiff.write_geotiff","title":"<code>write_geotiff(filename, values, dst_trans, dst_crs, dtype=np.uint8, compression='deflate')</code>","text":"<p>Write a single-band GeoTIFF with provided transform and CRS.</p> <p>Parameters:</p> Name Type Description Default <code>filename</code> <code>str or Path</code> <p>Output GeoTIFF file path.</p> required <code>values</code> <code>ndarray</code> <p>2D array of raster values.</p> required <code>dst_trans</code> <code>Affine</code> <p>Affine transform for the raster.</p> required <code>dst_crs</code> <code>CRS</code> <p>Coordinate reference system.</p> required <code>dtype</code> <code>DTypeLike</code> <p>Data type for output raster, by default np.uint8.</p> <code>uint8</code> <code>compression</code> <code>str</code> <p>Compression type for GeoTIFF (e.g., \"deflate\", \"lzw\"), by default \"deflate\".</p> <code>'deflate'</code>"},{"location":"reference/io/#propagator.io.writer.metadata_json","title":"<code>propagator.io.writer.metadata_json</code>","text":""},{"location":"reference/io/#propagator.io.writer.isochrones_geojson","title":"<code>propagator.io.writer.isochrones_geojson</code>","text":""},{"location":"reference/io/#propagator.io.writer.isochrones_geojson.smooth_linestring","title":"<code>smooth_linestring(linestring, smooth_sigma)</code>","text":"<p>Uses a gauss filter to smooth out the LineString coordinates.</p>"},{"location":"reference/io/#propagator.io.writer.isochrones_geojson.extract_isochrone","title":"<code>extract_isochrone(values, transf, thresholds=[0.5, 0.75, 0.9], med_filt_val=9, min_length=0.0001, smooth_sigma=0.8, simp_fact=1e-05)</code>","text":"<p>extract isochrone from the propagation probability map values at the probanilities thresholds,  applying filtering to smooth out the result :param values: :param transf: :param thresholds: :param med_filt_val: :param min_length: :param smooth_sigma: :param simp_fact: :return:</p>"},{"location":"reference/numba/","title":"propagator.core.numba","text":"<p>Numba-accelerated kernels, models, and helper functions backing the simulation engine. Use these interfaces when you need to customise the low-level spread behaviour or integrate new stochastic components.</p>"},{"location":"reference/numba/#public-facade","title":"Public Facade","text":""},{"location":"reference/numba/#propagator.core.numba","title":"<code>propagator.core.numba</code>","text":""},{"location":"reference/numba/#propagator.core.numba.FuelSystem","title":"<code>FuelSystem(n_fuels)</code>","text":""},{"location":"reference/numba/#propagator.core.numba.FuelSystem.add_fuel","title":"<code>add_fuel(fuel_id, name, v0, d0, hhv, d1=0.0, humidity=-9999.0, spotting=False, prob_ign_by_embers=0.0, burn=True)</code>","text":"<p>Adds a Fuel object to the FuelSystem.</p> <p>Parameters:</p> Name Type Description Default <code>fuel_id</code> <code>int</code> <p>The unique identifier for the fuel type</p> required <code>name</code> <code>str</code> <p>The name of the fuel type</p> required <code>v0</code> <code>float</code> <p>The initial spread rate (m/min)</p> required <code>d0</code> <code>float</code> <p>The dead fuel density (kg/m^2)</p> required <code>hhv</code> <code>float</code> <p>The higher heating value (KJ/kg)</p> required <code>d1</code> <code>float</code> <p>The live fuel density (kg/m^2)</p> <code>0.0</code> <code>humidity</code> <code>float</code> <p>The fuel moisture content (fraction)</p> <code>-9999.0</code> <code>spotting</code> <code>bool</code> <p>Whether the fuel type is prone to spotting (default is False)</p> <code>False</code> <code>prob_ign_by_embers</code> <code>float</code> <p>The probability of ignition by embers (default is 0.0)</p> <code>0.0</code> <code>burn</code> <code>bool</code> <p>Whether the fuel type is combustible (default is True)</p> <code>True</code>"},{"location":"reference/numba/#propagator.core.numba.get_p_moisture_fn","title":"<code>get_p_moisture_fn(moist_model_code)</code>","text":"<p>Select a moisture probability correction by code.</p> <p>Parameters:</p> Name Type Description Default <code>moist_model_code</code> <code>MoistureModel</code> <p>The code of the moisture model to select.</p> required <p>Returns:</p> Type Description <code>    function with signature</code> <p><code>(moist: float) -&gt; float</code>.</p>"},{"location":"reference/numba/#propagator.core.numba.get_p_time_fn","title":"<code>get_p_time_fn(ros_model_code)</code>","text":"<p>Select a rate-of-spread model by code.</p> <p>Parameters:</p> Name Type Description Default <code>ros_model_code</code> <code>RateOfSpreadModel</code> <p>The code of the rate-of-spread model to select.</p> required <p>Returns:</p> Type Description <code>    function with signature</code> <p><code>(v0, dem_from, dem_to, angle_to, dist, moist, w_dir, w_speed) -&gt; (time_seconds, ros)</code>.</p>"},{"location":"reference/numba/#propagator.core.numba.next_updates_fn","title":"<code>next_updates_fn(rows, cols, realizations, cellsize, time, veg, dem, fire, moisture, wind_dir, wind_speed, fuels, p_time_fn, p_moist_fn)</code>","text":"<p>Compute the next updates for the fire spread simulation.</p> <p>Parameters:</p> Name Type Description Default <code>rows</code> <code>NDArray[integer]</code> <p>The row indices of the fire spread updates.</p> required <code>cols</code> <code>NDArray[integer]</code> <p>The column indices of the fire spread updates.</p> required <code>realizations</code> <code>NDArray[integer]</code> <p>The realization indices of the fire spread updates.</p> required <code>cellsize</code> <code>float</code> <p>The size of each cell (in meters)</p> required <code>time</code> <code>int</code> <p>The current time step.</p> required <code>veg</code> <code>NDArray[integer]</code> <p>The 2D vegetation array</p> required <code>dem</code> <code>NDArray[floating]</code> <p>The 2D digital elevation model array</p> required <code>fire</code> <code>NDArray[int8]</code> <p>The 3D current fire state</p> required <code>moisture</code> <code>NDArray[floating]</code> <p>The 2D moisture array (units: fraction [0, 1])</p> required <code>wind_dir</code> <code>NDArray[floating]</code> <p>The 2D wind direction array (units: radians between [-\u03c0, \u03c0], 0 is east-&gt;west)</p> required <code>wind_speed</code> <code>NDArray[floating]</code> <p>The 2D wind speed array (units: km/h)</p> required <code>fuels</code> <code>FuelSystem</code> <p>The fuel system</p> required <code>p_time_fn</code> <code>Any</code> <p>The function to compute the spread time (must be jit-compiled). Units are compliant with other functions.     signature: (v0: float, dh: float, angle_to: float, dist: float, moist: float, w_dir: float, w_speed: float) -&gt; tuple[float, float]</p> required <code>p_moist_fn</code> <code>Any</code> <p>The function to compute the moisture probability (must be jit-compiled). Units are compliant with other functions.     signature: (moist: float) -&gt; float</p> required <p>Returns:</p> Type Description <code>UpdateBatchTuple</code> <p>A tuple containing the arrays for the next updates. (next_times, next_rows, next_cols, next_realizations, next_ros, next_fireline_intensities)</p>"},{"location":"reference/numba/#fuel-and-model-definitions","title":"Fuel and Model Definitions","text":""},{"location":"reference/numba/#propagator.core.numba.models","title":"<code>propagator.core.numba.models</code>","text":"<p>Models and data structures for the Numba JIT-compiled wildfire propagation engine.</p> <p>This file defines the data structures used in the Numba JIT-compiled wildfire propagation engine.</p>"},{"location":"reference/numba/#propagator.core.numba.models.Fuel","title":"<code>Fuel(name, v0, d0, hhv, d1=0.0, humidity=-9999.0, spotting=False, prob_ign_by_embers=0.0, burn=True)</code>","text":"<p>Initialize a Fuel object.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>The name of the fuel type</p> required <code>v0</code> <code>float</code> <p>The initial spread rate (m/min)</p> required <code>d0</code> <code>float</code> <p>The dead fuel density (kg/m^2)</p> required <code>hhv</code> <code>float</code> <p>The higher heating value (KJ/kg)</p> required <code>d1</code> <code>float</code> <p>The live fuel density (kg/m^2)</p> <code>0.0</code> <code>humidity</code> <code>float</code> <p>The fuel moisture content (fraction)</p> <code>-9999.0</code> <code>spotting</code> <code>bool</code> <p>Whether the fuel type is prone to spotting (default is False)</p> <code>False</code> <code>prob_ign_by_embers</code> <code>float</code> <p>The probability of ignition by embers (default is 0.0)</p> <code>0.0</code> <code>burn</code> <code>bool</code> <p>Whether the fuel type is combustible (default is True)</p> <code>True</code>"},{"location":"reference/numba/#propagator.core.numba.models.FuelSystem","title":"<code>FuelSystem(n_fuels)</code>","text":""},{"location":"reference/numba/#propagator.core.numba.models.FuelSystem.add_fuel","title":"<code>add_fuel(fuel_id, name, v0, d0, hhv, d1=0.0, humidity=-9999.0, spotting=False, prob_ign_by_embers=0.0, burn=True)</code>","text":"<p>Adds a Fuel object to the FuelSystem.</p> <p>Parameters:</p> Name Type Description Default <code>fuel_id</code> <code>int</code> <p>The unique identifier for the fuel type</p> required <code>name</code> <code>str</code> <p>The name of the fuel type</p> required <code>v0</code> <code>float</code> <p>The initial spread rate (m/min)</p> required <code>d0</code> <code>float</code> <p>The dead fuel density (kg/m^2)</p> required <code>hhv</code> <code>float</code> <p>The higher heating value (KJ/kg)</p> required <code>d1</code> <code>float</code> <p>The live fuel density (kg/m^2)</p> <code>0.0</code> <code>humidity</code> <code>float</code> <p>The fuel moisture content (fraction)</p> <code>-9999.0</code> <code>spotting</code> <code>bool</code> <p>Whether the fuel type is prone to spotting (default is False)</p> <code>False</code> <code>prob_ign_by_embers</code> <code>float</code> <p>The probability of ignition by embers (default is 0.0)</p> <code>0.0</code> <code>burn</code> <code>bool</code> <p>Whether the fuel type is combustible (default is True)</p> <code>True</code>"},{"location":"reference/numba/#probability-and-rate-functions","title":"Probability and Rate Functions","text":""},{"location":"reference/numba/#propagator.core.numba.functions","title":"<code>propagator.core.numba.functions</code>","text":"<p>Spread, probability, and intensity model functions.</p> <p>This module contains pluggable formulations for rate-of-spread, probability modulators for wind/slope/moisture, fire spotting distance, and fireline intensity utilities used by the core propagator.</p>"},{"location":"reference/numba/#propagator.core.numba.functions.clip","title":"<code>clip(x, min, max)</code>","text":"<p>Clip x to the range [min, max].</p> <p>Parameters:</p> Name Type Description Default <code>x</code> <code>float</code> <p>Value to clip.</p> required <code>min</code> <code>float</code> <p>Minimum value.</p> required <code>max</code> <code>float</code> <p>Maximum value.</p> required <p>Returns:</p> Type Description <code>float</code> <p>Clipped value.</p>"},{"location":"reference/numba/#propagator.core.numba.functions.get_p_time_fn","title":"<code>get_p_time_fn(ros_model_code)</code>","text":"<p>Select a rate-of-spread model by code.</p> <p>Parameters:</p> Name Type Description Default <code>ros_model_code</code> <code>RateOfSpreadModel</code> <p>The code of the rate-of-spread model to select.</p> required <p>Returns:</p> Type Description <code>    function with signature</code> <p><code>(v0, dem_from, dem_to, angle_to, dist, moist, w_dir, w_speed) -&gt; (time_seconds, ros)</code>.</p>"},{"location":"reference/numba/#propagator.core.numba.functions.get_p_moisture_fn","title":"<code>get_p_moisture_fn(moist_model_code)</code>","text":"<p>Select a moisture probability correction by code.</p> <p>Parameters:</p> Name Type Description Default <code>moist_model_code</code> <code>MoistureModel</code> <p>The code of the moisture model to select.</p> required <p>Returns:</p> Type Description <code>    function with signature</code> <p><code>(moist: float) -&gt; float</code>.</p>"},{"location":"reference/numba/#propagator.core.numba.functions.p_time_rothermel","title":"<code>p_time_rothermel(v0, dh, angle, dist, moist, w_dir, w_speed)</code>","text":"<p>Propagation time and ROS according to Rothermel-like scaling.</p> <p>Parameters:</p> Name Type Description Default <code>v0</code> <code>float</code> <p>Base Rate of Spread for the cell vegetation (m/min)</p> required <code>dh</code> <code>float</code> <p>Elevation difference between source and neighbor cells. (m)</p> required <code>angle</code> <code>float</code> <p>Direction to neighbor (clockwise radians, 0 is north -&gt; south)</p> required <code>dist</code> <code>float</code> <p>Distance between cells (m).</p> required <code>moist</code> <code>float</code> <p>Moisture values (fraction).</p> required <code>w_dir</code> <code>float</code> <p>Wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>Wind speed (km/h).</p> required <p>Returns:</p> Type Description <code>tuple[float, float]</code> <p>(transition time [s], ROS [m/min]).</p>"},{"location":"reference/numba/#propagator.core.numba.functions.p_time_wang","title":"<code>p_time_wang(v0, dh, angle, dist, moist, w_dir, w_speed)</code>","text":"<p>Propagation time and ROS according to Wang et al.</p> <p>Parameters:</p> Name Type Description Default <code>v0</code> <code>float</code> <p>Base ROS vector per vegetation type.</p> required <code>dh</code> <code>float</code> <p>Elevation at source and neighbor cells.</p> required <code>angle</code> <code>float</code> <p>Direction to neighbor (clockwise radians, 0 is north -&gt; south).</p> required <code>dist</code> <code>float</code> <p>Distance to neighbour cell (m).</p> required <code>moist</code> <code>float</code> <p>Moisture values (fractional).</p> required <code>w_dir</code> <code>float</code> <p>Wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>Wind speed (km/h).</p> required <p>Returns:</p> Type Description <code>tuple[ndarray, ndarray]</code> <p>(transition time [s], ROS [m/min]).</p>"},{"location":"reference/numba/#propagator.core.numba.functions.p_time_standard","title":"<code>p_time_standard(v0, dh, angle, dist, moist, w_dir, w_speed)</code>","text":"<p>Baseline propagation time and ROS with combined wind-slope factor.</p> <p>Parameters:</p> Name Type Description Default <code>v0</code> <code>float</code> <p>Base ROS vector per vegetation type.</p> required <code>dh</code> <code>float</code> <p>Elevation difference between source and neighbor cells.</p> required <code>angle</code> <code>float</code> <p>Direction to neighbor (clockwise radians, 0 is north -&gt; south).</p> required <code>dist</code> <code>float</code> <p>Distance to neighbor (m).</p> required <code>moist</code> <code>float</code> <p>Moisture values (%).</p> required <code>w_dir</code> <code>float</code> <p>Wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>Wind speed (km/h).</p> required <p>Returns:</p> Type Description <code>tuple[float, float]</code> <p>(transition time [s], ROS [m/min]).</p>"},{"location":"reference/numba/#propagator.core.numba.functions.w_h_effect","title":"<code>w_h_effect(angle, w_speed, w_dir, dh, dist)</code>","text":"<p>Scale factor taking into account wind, slope and aspect effects on propagation rate of spread.</p> <p>Parameters:</p> Name Type Description Default <code>angle</code> <code>float</code> <p>The angle to the neighboring pixel (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>The wind speed (km/h).</p> required <code>w_dir</code> <code>float</code> <p>The wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>dh</code> <code>float</code> <p>The elevation difference between source and neighbor cells (meters).</p> required <code>dist</code> <code>float</code> <p>The distance to the neighbor (meters).</p> required <p>Returns:</p> Type Description <code>float</code> <p>Scale factor for wind, slope, and aspect effects on propagation rate of spread.</p>"},{"location":"reference/numba/#propagator.core.numba.functions.w_h_effect_on_probability","title":"<code>w_h_effect_on_probability(angle, w_speed, w_dir, dh, dist)</code>","text":"<p>Scale factor taking into account wind, slope and aspect effects on probability. This is derived from <code>w_h_effect</code> by scaling the output non linearly.</p> <p>Parameters:</p> Name Type Description Default <code>angle</code> <code>float</code> <p>The angle to the neighboring pixel (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>The wind speed (km/h).</p> required <code>w_dir</code> <code>float</code> <p>The wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>dh</code> <code>float</code> <p>The elevation difference between source and neighbor cells (meters).</p> required <code>dist</code> <code>float</code> <p>The distance to the neighbor (meters).</p> required <p>Returns:</p> Type Description <code>float</code> <p>Scale factor for wind, slope, and aspect effects on probability.</p>"},{"location":"reference/numba/#propagator.core.numba.functions.p_moisture_trucchia","title":"<code>p_moisture_trucchia(moist)</code>","text":"<p>Moisture correction to the transition probability p_{i,j}.</p> <p>Uses a 5th-degree polynomial in x = moist/Mx, with Mx = 0.3 (Trucchia et al., Fire 2020).</p> <p>Parameters:</p> Name Type Description Default <code>moist</code> <code>float</code> <p>Moisture content (fractional).</p> required <p>Returns:</p> Type Description <code>float</code> <p>Moisture correction factor (p_{i,j}).</p>"},{"location":"reference/numba/#propagator.core.numba.functions.p_moisture_baghino","title":"<code>p_moisture_baghino(moist)</code>","text":"<p>Moisture correction to p_{i,j}. Older formulation, Baghino; Trucchia et al., 2020). Parameters come from constants.</p> <p>Parameters:</p> Name Type Description Default <code>moist</code> <code>float</code> <p>Moisture content (fractional).</p> required <p>Returns:</p> Type Description <code>float</code> <p>Moisture correction factor (p_{i,j}).</p>"},{"location":"reference/numba/#propagator.core.numba.functions.lhv_fuel","title":"<code>lhv_fuel(hhv, moisture)</code>","text":"<p>Lower heating value of fuels given higher heating value and FFMC.</p> <p>Parameters:</p> Name Type Description Default <code>hhv</code> <code>float</code> <p>Higher heating value of dead fuel (kJ/kg).</p> required <code>moisture</code> <code>float</code> <p>fuel moisture content (fractional).</p> required"},{"location":"reference/numba/#propagator.core.numba.functions.fireline_intensity","title":"<code>fireline_intensity(d0, d1, ros, lhv_dead_fuel, lhv_canopy)</code>","text":"<p>Estimate fireline intensity (kW/m) from fuel loads and Rate of spread.</p> <p>Parameters:</p> Name Type Description Default <code>d0</code> <code>float</code> <p>Dead fuel density (kg/m^2).</p> required <code>d1</code> <code>float</code> <p>Canopy fuel density (kg/m^2).</p> required <code>ros</code> <code>float</code> <p>Rate of spread (m/min).</p> required <code>lhv_dead_fuel</code> <code>float</code> <p>Lower heating value of dead fuel (kJ/kg).</p> required <code>lhv_canopy</code> <code>float</code> <p>Lower heating value of canopy fuel (kJ/kg).</p> required <p>Returns:</p> Type Description <code>float</code> <p>Fireline intensity (kW/m).</p>"},{"location":"reference/numba/#propagator.core.numba.functions.get_probability_to_neighbour","title":"<code>get_probability_to_neighbour(angle, dist, w_dir, w_speed, moisture, dh, transition_probability, p_moist_fn)</code>","text":"<p>Get the probability of fire spread to a neighboring pixel.</p> <p>Parameters:</p> Name Type Description Default <code>angle</code> <code>float</code> <p>The angle to the neighboring pixel (clockwise radians, 0 is north -&gt; south).</p> required <code>dist</code> <code>float</code> <p>The distance to the neighboring pixel (meters).</p> required <code>w_dir</code> <code>float</code> <p>The wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>The wind speed (km/h).</p> required <code>moisture</code> <code>float</code> <p>The moisture content (fraction).</p> required <code>dh</code> <code>float</code> <p>The difference in height (meters).</p> required <code>transition_probability</code> <code>float</code> <p>The base transition probability.</p> required <code>p_moist_fn</code> <code>Any</code> <p>The function to compute the moisture probability (must be jit-compiled). Units are compliant with other functions.     signature: (moist: float) -&gt; float</p> required <p>Returns:</p> Type Description <code>float</code> <p>The probability of fire spread to the neighboring pixel.</p>"},{"location":"reference/numba/#propagation-kernels","title":"Propagation Kernels","text":""},{"location":"reference/numba/#propagator.core.numba.propagation","title":"<code>propagator.core.numba.propagation</code>","text":"<p>Propagation functions for fire spread simulation.</p> <p>This module contains functions for simulating fire spread in a grid environment, including ember spotting and cell updates.</p>"},{"location":"reference/numba/#propagator.core.numba.propagation.fire_spotting","title":"<code>fire_spotting(angle, w_dir, w_speed)</code>","text":"<p>Evaluate spotting distance using Alexandridis' formulation.</p> <p>Parameters:</p> Name Type Description Default <code>angle</code> <code>float</code> <p>The angle of the ember's trajectory (clockwise radians, 0 is north -&gt; south)</p> required <code>w_dir</code> <code>float</code> <p>The wind direction (clockwise radians, 0 is north -&gt; south)</p> required <code>w_speed</code> <code>float</code> <p>The wind speed (km/h)</p> required <p>Returns:</p> Type Description <code>tuple[float, float]</code> <p>The spotting distance (meters) and the landing time (seconds)</p>"},{"location":"reference/numba/#propagator.core.numba.propagation.compute_spotting","title":"<code>compute_spotting(row, col, cellsize, veg, fire, wind_dir, wind_speed, fuels)</code>","text":"<p>Compute ember spotting updates for a given cell.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the current cell</p> required <code>col</code> <code>int</code> <p>The column index of the current cell</p> required <code>cellsize</code> <code>float</code> <p>The size of each cell (m)</p> required <code>veg</code> <code>NDArray[integer]</code> <p>The vegetation type array</p> required <code>fire</code> <code>NDArray[int8]</code> <p>The fire state array</p> required <code>wind_dir</code> <code>float</code> <p>The wind direction (clockwise radians, 0 is north -&gt; south)</p> required <code>wind_speed</code> <code>float</code> <p>The wind speed (km/h)</p> required <code>fuels</code> <code>FuelSystem</code> <p>The fuel system object</p> required <p>Returns:</p> Type Description <code>list[tuple[int, int, int, float, float]]</code> <p>A list of spotting updates, each represented as a tuple (transition_times, rows, cols, rates_of_spread, fireline_intensities)</p>"},{"location":"reference/numba/#propagator.core.numba.propagation.calculate_fire_behavior","title":"<code>calculate_fire_behavior(fuel_from, fuel_to, dh, dist, angle, moisture, w_dir, w_speed, p_time_fn)</code>","text":"<p>Calculate fire behaviour during propagation between cells</p> <p>Parameters:</p> Name Type Description Default <code>fuel_from</code> <code>Fuel</code> <p>The fuel object for the source cell.</p> required <code>fuel_to</code> <code>Fuel</code> <p>The fuel object for the target cell.</p> required <code>dh</code> <code>float</code> <p>The elevation difference between the source and target cells (m).</p> required <code>dist</code> <code>float</code> <p>The distance to the target cell (m).</p> required <code>angle</code> <code>float</code> <p>The angle to the target cell (clockwise radians, 0 is north -&gt; south).</p> required <code>moisture</code> <code>float</code> <p>The moisture content of the fuel (fraction).</p> required <code>w_dir</code> <code>float</code> <p>The wind direction (clockwise radians, 0 is north -&gt; south).</p> required <code>w_speed</code> <code>float</code> <p>The wind speed (km/h).</p> required <code>p_time_fn</code> <code>Any</code> <p>The function to compute the spread time (must be jit-compiled). Units are compliant with other functions.     signature: (v0: float, dh: float, angle_to: float, dist: float, moist: float, w_dir: float, w_speed: float) -&gt; tuple[float, float]</p> required <p>Returns:</p> Type Description <code>tuple[int, float, float]</code> <p>A tuple containing the transition time, rate of spread, and fireline intensity.</p>"},{"location":"reference/numba/#propagator.core.numba.propagation.single_cell_updates","title":"<code>single_cell_updates(row, col, cellsize, veg, dem, fire, moisture, wind_dir, wind_speed, fuels, p_time_fn, p_moist_fn)</code>","text":"<p>Apply fire spread to a single cell and get the next spread updates.</p> <p>Parameters:</p> Name Type Description Default <code>row</code> <code>int</code> <p>The row index of the current cell</p> required <code>col</code> <code>int</code> <p>The column index of the current cell</p> required <code>cellsize</code> <code>float</code> <p>The size of each cell (in meters)</p> required <code>veg</code> <code>NDArray[integer]</code> <p>The 2D vegetation array</p> required <code>dem</code> <code>NDArray[floating]</code> <p>The 2D digital elevation model array</p> required <code>fire</code> <code>NDArray[int8]</code> <p>The 2D current fire state</p> required <code>moisture</code> <code>NDArray[floating]</code> <p>The 2D moisture array (units: fraction [0, 1])</p> required <code>wind_dir</code> <code>NDArray[floating]</code> <p>The 2D wind direction array (units: radians between [-\u03c0, \u03c0], 0 is east-&gt;west)</p> required <code>wind_speed</code> <code>NDArray[floating]</code> <p>The 2D wind speed array (units: km/h)</p> required <code>fuels</code> <code>FuelSystem</code> <p>The fuel system</p> required <code>p_time_fn</code> <code>Any</code> <p>The function to compute the spread time (must be jit-compiled). Units are compliant with other functions.     signature: (v0: float, dh: float, angle_to: float, dist: float, moist: float, w_dir: float, w_speed: float) -&gt; tuple[float, float]</p> required <code>p_moist_fn</code> <code>Any</code> <p>The function to compute the moisture probability (must be jit-compiled). Units are compliant with other functions.     signature: (moist: float) -&gt; float</p> required <p>Returns:</p> Type Description <code>list[tuple[int, int, int, float, float]]</code> <p>A list of fire spread updates (transition_times, rows, cols, rates_of_spread, fireline_intensities)</p>"},{"location":"reference/numba/#propagator.core.numba.propagation.next_updates_fn","title":"<code>next_updates_fn(rows, cols, realizations, cellsize, time, veg, dem, fire, moisture, wind_dir, wind_speed, fuels, p_time_fn, p_moist_fn)</code>","text":"<p>Compute the next updates for the fire spread simulation.</p> <p>Parameters:</p> Name Type Description Default <code>rows</code> <code>NDArray[integer]</code> <p>The row indices of the fire spread updates.</p> required <code>cols</code> <code>NDArray[integer]</code> <p>The column indices of the fire spread updates.</p> required <code>realizations</code> <code>NDArray[integer]</code> <p>The realization indices of the fire spread updates.</p> required <code>cellsize</code> <code>float</code> <p>The size of each cell (in meters)</p> required <code>time</code> <code>int</code> <p>The current time step.</p> required <code>veg</code> <code>NDArray[integer]</code> <p>The 2D vegetation array</p> required <code>dem</code> <code>NDArray[floating]</code> <p>The 2D digital elevation model array</p> required <code>fire</code> <code>NDArray[int8]</code> <p>The 3D current fire state</p> required <code>moisture</code> <code>NDArray[floating]</code> <p>The 2D moisture array (units: fraction [0, 1])</p> required <code>wind_dir</code> <code>NDArray[floating]</code> <p>The 2D wind direction array (units: radians between [-\u03c0, \u03c0], 0 is east-&gt;west)</p> required <code>wind_speed</code> <code>NDArray[floating]</code> <p>The 2D wind speed array (units: km/h)</p> required <code>fuels</code> <code>FuelSystem</code> <p>The fuel system</p> required <code>p_time_fn</code> <code>Any</code> <p>The function to compute the spread time (must be jit-compiled). Units are compliant with other functions.     signature: (v0: float, dh: float, angle_to: float, dist: float, moist: float, w_dir: float, w_speed: float) -&gt; tuple[float, float]</p> required <code>p_moist_fn</code> <code>Any</code> <p>The function to compute the moisture probability (must be jit-compiled). Units are compliant with other functions.     signature: (moist: float) -&gt; float</p> required <p>Returns:</p> Type Description <code>UpdateBatchTuple</code> <p>A tuple containing the arrays for the next updates. (next_times, next_rows, next_cols, next_realizations, next_ros, next_fireline_intensities)</p>"},{"location":"reference/propagator/","title":"propagator.core","text":"<p>High-level simulation primitives and facades for running PROPAGATOR from Python. The sections below cover the public API exposed by <code>propagator.core</code> along with the supporting data models and scheduling helpers.</p>"},{"location":"reference/propagator/#public-facade","title":"Public Facade","text":""},{"location":"reference/propagator/#propagator.core","title":"<code>propagator.core</code>","text":"<p>Package init for the wildfire propagator core.</p>"},{"location":"reference/propagator/#propagator.core.BoundaryConditions","title":"<code>BoundaryConditions(time, moisture=None, wind_dir=None, wind_speed=None, ignitions=None, additional_moisture=None, vegetation_changes=None)</code>  <code>dataclass</code>","text":"<p>Boundary conditions applied at or after a given simulation time.</p> <p>Attributes:</p> Name Type Description <code>time</code> <code>int</code> <p>Simulation time the conditions refer to (seconds from simulation start).</p> <code>moisture</code> <code>Optional[NDArray[floating]]</code> <p>Fuel moisture map (%).</p> <code>wind_dir</code> <code>Optional[NDArray[floating]]</code> <p>Wind direction map (weather convention, degrees clockwise, north is 0).</p> <code>wind_speed</code> <code>Optional[NDArray[floating]]</code> <p>Wind speed map (km/h).</p> <code>ignitions</code> <code>Optional[</code> <p>npt.NDArray[np.bool_] | list[tuple[int, int] | tuple[int, int, int]]</p> <code>]</code> <p>Ignitions to enqueue. Accepts either a boolean raster (2D applies to every realization; 3D maps explicit <code>realization</code> planes) or a list of <code>(row, col)</code> / <code>(row, col, realization)</code> tuples.</p> <code>additional_moisture</code> <code>Optional[NDArray[floating]]</code> <p>Extra moisture to add to fuel (%), can be sparse.</p> <code>vegetation_changes</code> <code>Optional[NDArray[floating]]</code> <p>Raster of vegetation type overrides (NaN to skip).</p>"},{"location":"reference/propagator/#propagator.core.PropagatorStats","title":"<code>PropagatorStats(n_active, area_mean, area_50, area_75, area_90)</code>  <code>dataclass</code>","text":"<p>Summary statistics for the current simulation state.</p>"},{"location":"reference/propagator/#propagator.core.PropagatorStats.to_dict","title":"<code>to_dict(c_time, ref_date)</code>","text":"<p>Serialize stats with the current simulation time expressed in seconds.</p>"},{"location":"reference/propagator/#propagator.core.Propagator","title":"<code>Propagator(veg, dem, fuels=(lambda: FUEL_SYSTEM_LEGACY)(), cellsize=CELLSIZE, do_spotting=False, realizations=REALIZATIONS, p_time_fn=get_p_time_fn(ROS_DEFAULT), p_moist_fn=get_p_moisture_fn(MOISTURE_MODEL_DEFAULT), out_of_bounds_mode='raise')</code>  <code>dataclass</code>","text":"<p>Stochastic cellular wildfire spread simulator.</p> <p>PROPAGATOR evolves a binary fire state over a regular grid for a configurable number of realizations. Spread depends on vegetation, topography and environmental drivers (wind, moisture) through pluggable probability and travel-time functions.</p> <p>Attributes:</p> Name Type Description <code>veg</code> <code>ndarray</code> <p>2D array of vegetation codes as defined in the provided FuelSystem</p> <code>dem</code> <code>ndarray</code> <p>2D array of elevation values (meters above sea level).</p> <code>fuels</code> <code>(FuelSystem, optional)</code> <p>Object defining fuels types and fire propagation probability between fuel types</p> <code>cellsize</code> <code>(float, optional)</code> <p>The size of lattice (meters).</p> <code>do_spotting</code> <code>(bool, optional)</code> <p>Whether to enable fire-spotting in the model.</p> <code>realizations</code> <code>(int, optional)</code> <p>Number of stochastic realizations to simulate.</p> <code>p_time_fn</code> <code>(Any, optional)</code> <p>The function to compute the spread time (must be jit-compiled). Units are compliant with other functions.     signature: (v0: float, dh: float, angle_to: float, dist: float,     moist: float, w_dir: float, w_speed: float) -&gt; tuple[float, float]</p> <code>p_moist_fn</code> <code>(Any, optional)</code> <p>The function to compute the moisture probability (must be jit-compiled) Units are compliant with other functions.     signature: (moist: float) -&gt; float</p> <code>out_of_bounds_mode</code> <code>(Literal['ignore', 'error'], optional)</code> <p>Whether to raise an error if out-of-bounds updates are detected. Default is \"error\".</p>"},{"location":"reference/propagator/#propagator.core.Propagator.compute_fire_probability","title":"<code>compute_fire_probability()</code>","text":"<p>Return mean burn probability across realizations for each cell.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array with values in [0, 1].</p>"},{"location":"reference/propagator/#propagator.core.Propagator.compute_ros_max","title":"<code>compute_ros_max()</code>","text":"<p>Return per-cell maximum Rate of Spread across realizations.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array with max RoS per cell.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.compute_ros_mean","title":"<code>compute_ros_mean()</code>","text":"<p>Return per-cell mean Rate of Spread, ignoring zeros as no-spread.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array with mean RoS per cell.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.compute_fireline_int_max","title":"<code>compute_fireline_int_max()</code>","text":"<p>Return per-cell maximum fireline intensity across realizations.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array of max intensity values.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.compute_fireline_int_mean","title":"<code>compute_fireline_int_mean()</code>","text":"<p>Return per-cell mean fireline intensity, ignoring zeros as no-spread.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array of mean intensity values.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.compute_stats","title":"<code>compute_stats(values)</code>","text":"<p>Compute simple area-based stats and number of active cells.</p> <p>Parameters:</p> Name Type Description Default <code>values</code> <code>ndarray</code> <p>Fire probability map in [0, 1].</p> required <p>Returns:</p> Type Description <code>PropagatorStats</code> <p>Dataclass with counters and area summaries.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.set_boundary_conditions","title":"<code>set_boundary_conditions(boundary_condition)</code>","text":"<p>Externally set boundary conditions at desired time in the scheduler.</p> <p>Parameters:</p> Name Type Description Default <code>boundary_condition</code> <code>BoundaryConditions</code> <p>Conditions to apply.</p> required"},{"location":"reference/propagator/#propagator.core.Propagator.step","title":"<code>step()</code>","text":"<p>Advance the simulation to the next scheduled time and update state.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.get_output","title":"<code>get_output()</code>","text":"<p>Assemble the current outputs and summary stats into a dataclass.</p> <p>Returns:     PropagatorOutput: Snapshot of fire probability,         RoS, intensity, stats.</p>"},{"location":"reference/propagator/#propagator.core.Propagator.next_time","title":"<code>next_time()</code>","text":"<p>Get the next time step.</p> <p>Returns:     int | None: 0 at initialization; None if no more events; otherwise     the next scheduled simulation time.</p>"},{"location":"reference/propagator/#propagator.core.PropagatorOutOfBoundsError","title":"<code>PropagatorOutOfBoundsError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Custom error for out-of-bounds updates in the Propagator.</p>"},{"location":"reference/propagator/#propagator.core.get_p_moisture_fn","title":"<code>get_p_moisture_fn(moist_model_code)</code>","text":"<p>Select a moisture probability correction by code.</p> <p>Parameters:</p> Name Type Description Default <code>moist_model_code</code> <code>MoistureModel</code> <p>The code of the moisture model to select.</p> required <p>Returns:</p> Type Description <code>    function with signature</code> <p><code>(moist: float) -&gt; float</code>.</p>"},{"location":"reference/propagator/#propagator.core.get_p_time_fn","title":"<code>get_p_time_fn(ros_model_code)</code>","text":"<p>Select a rate-of-spread model by code.</p> <p>Parameters:</p> Name Type Description Default <code>ros_model_code</code> <code>RateOfSpreadModel</code> <p>The code of the rate-of-spread model to select.</p> required <p>Returns:</p> Type Description <code>    function with signature</code> <p><code>(v0, dem_from, dem_to, angle_to, dist, moist, w_dir, w_speed) -&gt; (time_seconds, ros)</code>.</p>"},{"location":"reference/propagator/#data-models","title":"Data Models","text":""},{"location":"reference/propagator/#propagator.core.models","title":"<code>propagator.core.models</code>","text":"<p>Core wildfire propagation engine.</p> <p>This module defines the main simulation primitives and the <code>Propagator</code> class that evolves a fire state over a grid using wind, slope, vegetation, and moisture inputs. Public dataclasses capture boundary conditions, actions, summary statistics, and output snapshots suitable for CLI and IO layers.</p>"},{"location":"reference/propagator/#propagator.core.models.PropagatorError","title":"<code>PropagatorError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Domain-specific error raised by PROPAGATOR.</p>"},{"location":"reference/propagator/#propagator.core.models.BoundaryConditions","title":"<code>BoundaryConditions(time, moisture=None, wind_dir=None, wind_speed=None, ignitions=None, additional_moisture=None, vegetation_changes=None)</code>  <code>dataclass</code>","text":"<p>Boundary conditions applied at or after a given simulation time.</p> <p>Attributes:</p> Name Type Description <code>time</code> <code>int</code> <p>Simulation time the conditions refer to (seconds from simulation start).</p> <code>moisture</code> <code>Optional[NDArray[floating]]</code> <p>Fuel moisture map (%).</p> <code>wind_dir</code> <code>Optional[NDArray[floating]]</code> <p>Wind direction map (weather convention, degrees clockwise, north is 0).</p> <code>wind_speed</code> <code>Optional[NDArray[floating]]</code> <p>Wind speed map (km/h).</p> <code>ignitions</code> <code>Optional[</code> <p>npt.NDArray[np.bool_] | list[tuple[int, int] | tuple[int, int, int]]</p> <code>]</code> <p>Ignitions to enqueue. Accepts either a boolean raster (2D applies to every realization; 3D maps explicit <code>realization</code> planes) or a list of <code>(row, col)</code> / <code>(row, col, realization)</code> tuples.</p> <code>additional_moisture</code> <code>Optional[NDArray[floating]]</code> <p>Extra moisture to add to fuel (%), can be sparse.</p> <code>vegetation_changes</code> <code>Optional[NDArray[floating]]</code> <p>Raster of vegetation type overrides (NaN to skip).</p>"},{"location":"reference/propagator/#propagator.core.models.PropagatorStats","title":"<code>PropagatorStats(n_active, area_mean, area_50, area_75, area_90)</code>  <code>dataclass</code>","text":"<p>Summary statistics for the current simulation state.</p>"},{"location":"reference/propagator/#propagator.core.models.PropagatorStats.to_dict","title":"<code>to_dict(c_time, ref_date)</code>","text":"<p>Serialize stats with the current simulation time expressed in seconds.</p>"},{"location":"reference/propagator/#propagator.core.models.PropagatorOutput","title":"<code>PropagatorOutput(time, fire_probability, ros_mean, ros_max, fli_mean, fli_max, stats)</code>  <code>dataclass</code>","text":"<p>Snapshot of simulation outputs at a given time step.</p>"},{"location":"reference/propagator/#simulator-implementation","title":"Simulator Implementation","text":""},{"location":"reference/propagator/#propagator.core.propagator","title":"<code>propagator.core.propagator</code>","text":"<p>Core wildfire propagation engine.</p> <p>This module defines the main simulation primitives and the <code>Propagator</code> class that evolves a fire state over a grid using wind, slope, vegetation, and moisture inputs. Public dataclasses capture boundary conditions, actions, summary statistics, and output snapshots suitable for CLI and IO layers.</p>"},{"location":"reference/propagator/#propagator.core.propagator.PropagatorOutOfBoundsError","title":"<code>PropagatorOutOfBoundsError</code>","text":"<p>               Bases: <code>Exception</code></p> <p>Custom error for out-of-bounds updates in the Propagator.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator","title":"<code>Propagator(veg, dem, fuels=(lambda: FUEL_SYSTEM_LEGACY)(), cellsize=CELLSIZE, do_spotting=False, realizations=REALIZATIONS, p_time_fn=get_p_time_fn(ROS_DEFAULT), p_moist_fn=get_p_moisture_fn(MOISTURE_MODEL_DEFAULT), out_of_bounds_mode='raise')</code>  <code>dataclass</code>","text":"<p>Stochastic cellular wildfire spread simulator.</p> <p>PROPAGATOR evolves a binary fire state over a regular grid for a configurable number of realizations. Spread depends on vegetation, topography and environmental drivers (wind, moisture) through pluggable probability and travel-time functions.</p> <p>Attributes:</p> Name Type Description <code>veg</code> <code>ndarray</code> <p>2D array of vegetation codes as defined in the provided FuelSystem</p> <code>dem</code> <code>ndarray</code> <p>2D array of elevation values (meters above sea level).</p> <code>fuels</code> <code>(FuelSystem, optional)</code> <p>Object defining fuels types and fire propagation probability between fuel types</p> <code>cellsize</code> <code>(float, optional)</code> <p>The size of lattice (meters).</p> <code>do_spotting</code> <code>(bool, optional)</code> <p>Whether to enable fire-spotting in the model.</p> <code>realizations</code> <code>(int, optional)</code> <p>Number of stochastic realizations to simulate.</p> <code>p_time_fn</code> <code>(Any, optional)</code> <p>The function to compute the spread time (must be jit-compiled). Units are compliant with other functions.     signature: (v0: float, dh: float, angle_to: float, dist: float,     moist: float, w_dir: float, w_speed: float) -&gt; tuple[float, float]</p> <code>p_moist_fn</code> <code>(Any, optional)</code> <p>The function to compute the moisture probability (must be jit-compiled) Units are compliant with other functions.     signature: (moist: float) -&gt; float</p> <code>out_of_bounds_mode</code> <code>(Literal['ignore', 'error'], optional)</code> <p>Whether to raise an error if out-of-bounds updates are detected. Default is \"error\".</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.compute_fire_probability","title":"<code>compute_fire_probability()</code>","text":"<p>Return mean burn probability across realizations for each cell.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array with values in [0, 1].</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.compute_ros_max","title":"<code>compute_ros_max()</code>","text":"<p>Return per-cell maximum Rate of Spread across realizations.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array with max RoS per cell.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.compute_ros_mean","title":"<code>compute_ros_mean()</code>","text":"<p>Return per-cell mean Rate of Spread, ignoring zeros as no-spread.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array with mean RoS per cell.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.compute_fireline_int_max","title":"<code>compute_fireline_int_max()</code>","text":"<p>Return per-cell maximum fireline intensity across realizations.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array of max intensity values.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.compute_fireline_int_mean","title":"<code>compute_fireline_int_mean()</code>","text":"<p>Return per-cell mean fireline intensity, ignoring zeros as no-spread.</p> <p>Returns:</p> Type Description <code>ndarray</code> <p>2D array of mean intensity values.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.compute_stats","title":"<code>compute_stats(values)</code>","text":"<p>Compute simple area-based stats and number of active cells.</p> <p>Parameters:</p> Name Type Description Default <code>values</code> <code>ndarray</code> <p>Fire probability map in [0, 1].</p> required <p>Returns:</p> Type Description <code>PropagatorStats</code> <p>Dataclass with counters and area summaries.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.set_boundary_conditions","title":"<code>set_boundary_conditions(boundary_condition)</code>","text":"<p>Externally set boundary conditions at desired time in the scheduler.</p> <p>Parameters:</p> Name Type Description Default <code>boundary_condition</code> <code>BoundaryConditions</code> <p>Conditions to apply.</p> required"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.step","title":"<code>step()</code>","text":"<p>Advance the simulation to the next scheduled time and update state.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.get_output","title":"<code>get_output()</code>","text":"<p>Assemble the current outputs and summary stats into a dataclass.</p> <p>Returns:     PropagatorOutput: Snapshot of fire probability,         RoS, intensity, stats.</p>"},{"location":"reference/propagator/#propagator.core.propagator.Propagator.next_time","title":"<code>next_time()</code>","text":"<p>Get the next time step.</p> <p>Returns:     int | None: 0 at initialization; None if no more events; otherwise     the next scheduled simulation time.</p>"},{"location":"reference/propagator/#scheduler-helpers","title":"Scheduler Helpers","text":""},{"location":"reference/propagator/#propagator.core.scheduler","title":"<code>propagator.core.scheduler</code>","text":"<p>Lightweight event scheduler for propagation updates.</p> <p>Stores future updates grouped by simulation time and exposes utilities to push events, pop the earliest batch, and inspect active realizations.</p>"},{"location":"reference/propagator/#propagator.core.scheduler.SchedulerEvent","title":"<code>SchedulerEvent(updates=UpdateBatch(), moisture=None, wind_dir=None, wind_speed=None, additional_moisture=None, vegetation_changes=None)</code>  <code>dataclass</code>","text":"<p>Represents a scheduled event in the simulation.</p>"},{"location":"reference/propagator/#propagator.core.scheduler.SortedDict","title":"<code>SortedDict()</code>  <code>dataclass</code>","text":"<p>Represents a sorted dictionary for scheduling events.</p>"},{"location":"reference/propagator/#propagator.core.scheduler.Scheduler","title":"<code>Scheduler(realizations)</code>  <code>dataclass</code>","text":"<p>Lightweight event scheduler for propagation updates.</p> <p>Generic over the time key type (int or float), so your inputs and outputs stay consistent.</p>"},{"location":"reference/propagator/#propagator.core.scheduler.Scheduler.add_event","title":"<code>add_event(time, event)</code>","text":"<p>Adds an event to the scheduler.</p> <p>Parameters:</p> Name Type Description Default <code>time</code> <code>int</code> <p>Time for the event</p> required <code>event</code> <code>SchedulerEvent</code> <p>New event structure</p> required"}]}